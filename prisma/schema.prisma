generator client {
  provider = "prisma-client-js"
  //output   = "../src/generated/prisma"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model Artist {
  id             Int     @id @default(autoincrement())
  name           String
  bio            String? @db.Text
  country        String?
  birthYear      Int?
  deathYear      Int?
  avatarUrl      String?
  avatarPublicId String?

  primaryCategory ArtworkCategory

  artworks Artwork[]

  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt

  inquiries Inquiry[]
}

model Artwork {
  id            Int     @id @default(autoincrement())
  title         String
  year          Int?
  description   String? @db.Text
  imageUrl      String?
  imagePublicId String?

  technique   ArtworkTechnique?
  style       ArtworkStyle?
  motive      ArtworkMotive?
  orientation ArtworkOrientation?
  size        ArtworkStandardSize?
  framed      Boolean              @default(false)

  artist   Artist @relation(fields: [artistId], references: [id])
  artistId Int

  category ArtworkCategory

  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt

  inquiries Inquiry[]
}

model Inquiry {
  id      Int    @id @default(autoincrement())
  name    String
  email   String
  message String

  artistId  Int?
  artworkId Int?

  artist  Artist?  @relation(fields: [artistId], references: [id], onDelete: SetNull)
  artwork Artwork? @relation(fields: [artworkId], references: [id], onDelete: SetNull)

  status InquiryStatus @default(NEW)

  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt

  @@index([createdAt])
  @@index([status])
  @@index([artistId])
  @@index([artworkId])
}

model AdminUser {
  id           String    @id @default(cuid())
  email        String    @unique
  passwordHash String
  role         AdminRole @default(ADMIN)
  isActive     Boolean   @default(true)

  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt

  sessions AdminSession[]
}

model AdminSession {
  id String @id @default(cuid())

  adminUserId String
  adminUser   AdminUser @relation(fields: [adminUserId], references: [id], onDelete: Cascade)

  expiresAt DateTime
  createdAt DateTime  @default(now())
  revokedAt DateTime?
}

enum ArtworkCategory {
  PAINTING
  SCULPTURE
  PHOTOGRAPHY
  DRAWING_ILLUSTRATION
  PRINTMAKING
  DIGITAL_ART
  MIXED_MEDIA
  TEXTILE_FIBER_ART
  CERAMICS
  OTHER
}

enum ArtworkTechnique {
  OIL
  ACRYLIC
  WATERCOLOR
  GOUACHE
  INK
  MIXED_MEDIA
  DIGITAL_PAINTING
  PASTEL
  PENCIL
  CHARCOAL
  PRINT
  SPRAY_PAINT
  COLLAGE
  OTHER
}

enum ArtworkStyle {
  REALISM
  ABSTRACT
  EXPRESSIONISM
  IMPRESSIONISM
  MINIMALISM
  SURREALISM
  POP_ART
  CUBISM
  CONTEMPORARY
  STREET_ART
  FIGURATIVE
  CONCEPTUAL
  MODERN
  OTHER
}

enum ArtworkMotive {
  PORTRAIT
  LANDSCAPE
  STILL_LIFE
  ANIMALS
  FIGURE
  CITYSCAPE
  NATURE
  RELIGIOUS_MYTHOLOGICAL
  FANTASY_SCI_FI
  GEOMETRIC
  TYPOGRAPHY
  SOCIAL_POLITICAL
  OTHER
}

enum ArtworkOrientation {
  PORTRAIT
  LANDSCAPE
  SQUARE
  PANORAMIC
}

enum ArtworkStandardSize {
  SIZE_30x40
  SIZE_40x50
  SIZE_50x70
  SIZE_60x80
  SIZE_70x100
  A4_21x29_7
  A3_29_7x42
  A2_42x59_4
  CUSTOM
}

enum InquiryStatus {
  NEW
  READ
  ARCHIVED
}

enum AdminRole {
  ADMIN
  EDITOR
  VIEWER
}
